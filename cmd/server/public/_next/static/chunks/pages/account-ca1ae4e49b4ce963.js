(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{682:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return s(9229)}])},81280:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});class a{static isEmpty(t){return!t||""===t.trim()}static isNotEmpty(t){return!a.isEmpty(t)}static valueOrEmpty(t,e){return a.isEmpty(t)?e:t}static isEmailValid(t){return!!t.trim()&&/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)}static PasswordError(t){let e="";t.length<8&&(e="Password should be at least 8 characters long");let s=/[a-z]+/.test(t);return s||(e="Password should contain at least one lowercase character"),(s=/[A-Z]+/.test(t))||(e="Password should contain at least one uppercase character"),(s=/[0-9]+/.test(t))||(e="Password should contain at least one digit"),(s=/[!@#$%^&*.?-]+/.test(t))||(e="Password should contain at least one special character"),e}}},31730:function(t,e,s){"use strict";var a=s(67294),n=s(33356);class r extends a.Component{constructor(...t){super(...t),this.cookies=new n.Z,this.logout=t=>{this.cookies.remove("token"),void 0!==t&&t()}}}e.Z=r},43067:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});var a=s(85893),n=s(83365),r=s.n(n);function i(t){var e;let s="full"===t.width?r().btnFull:"",n=e=>{e.preventDefault(),t.onClick&&t.onClick()};return(0,a.jsx)("button",{type:t.type,className:"".concat(r().btn," ").concat(s," ").concat((()=>{if("primary"===t.variant)return t.disabled?r().btnPrimaryDisabled:r().btnPrimary;if("secondary"===t.variant)return t.disabled?r().btnSecondaryDisabled:r().btnSecondary;if("group"===t.variant){let e=t.selected?r().btnPrimary:r().btnSecondary;return"".concat(r().btnGroup," ").concat(e)}return""})()," ").concat(null!==(e=t.className)&&void 0!==e?e:""),onClick:n,disabled:t.disabled,children:t.title},t.title)}},53803:function(t,e,s){"use strict";s.d(e,{Z:function(){return u}});var a=s(85893),n=s(67294),r=s(16449),i=s.n(r),l=s(25652),o=s(6244);class u extends n.Component{render(){var t;return(0,a.jsx)("div",{id:"defaultModal",tabIndex:-1,className:"fixed flex grow ".concat((null===(t=this.state)||void 0===t?void 0:t.show)?"":"hidden"," z-50 h-screen w-full"),children:(0,a.jsx)("div",{className:i().modal,children:(0,a.jsxs)("div",{className:i().content,children:[(0,a.jsxs)("button",{type:"button",className:i().iconButton,onClick:this.props.onCancel,children:[(0,a.jsx)(l.Z,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"sr-only",children:"Close modal"})]}),(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)(o.Z,{className:"mx-auto mb-4 w-20 h-20 text-gray-200"}),(0,a.jsx)("h3",{className:i().message,children:this.props.message}),(0,a.jsx)("button",{onClick:this.props.onDelete,type:"button",className:i().btnDelete,children:"Yes, I'm sure"}),(0,a.jsx)("button",{onClick:this.props.onCancel,type:"button",className:i().btnCancel,children:"No, cancel"})]})]})})})}constructor(t){super(t),this.hide=()=>{this.setState({show:!1})},this.show=()=>{this.setState({show:!0})},this.state={show:!1}}}},84639:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});var a=s(85893);s(67294);var n=s(81280);function r(t){return n.Z.isNotEmpty(t.message)?(0,a.jsxs)("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-slate-700 dark:text-red-400 ".concat(t.className?t.className:""),role:"alert",children:[(0,a.jsx)("span",{className:"font-medium",children:"Error :"})," ",t.message]}):(0,a.jsx)(a.Fragment,{})}},98741:function(t,e,s){"use strict";s.d(e,{Z:function(){return o}});var a=s(85893);s(67294);var n=s(83815),r=s.n(n),i=s(67555),l=s.n(i);function o(t){var e;let s="full"===t.width?r().phoneInputFull:"";return(0,a.jsxs)("div",{className:"w-full shadow-sm",children:[(0,a.jsx)("label",{htmlFor:"phone",className:r().label,children:"Phone Number"}),(0,a.jsx)(l(),{autoFormat:t.autoFormat,countryCodeEditable:t.countryCodeEditable,preferredCountries:t.preferredCountries,inputProps:{id:t.id,name:t.name,className:"".concat(r().textInput," ").concat(r().phoneInput," ").concat(s," ").concat(null!==(e=t.classnames)&&void 0!==e?e:""),required:t.required,autoFocus:t.autoFocus,disabled:t.disabled},specialLabel:"",country:t.country,value:t.value,onChange:t.onChange})]})}},95546:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});var a=s(85893);s(67294);var n=s(83815),r=s.n(n);function i(t){var e;let s="full"===t.width?r().textInputFull:"",n=e=>{let s=e.currentTarget.value;t.onInput(s)};return(0,a.jsxs)("div",{className:r().textInputContainer,children:[(0,a.jsx)("label",{htmlFor:t.id,className:t.showLabel?r().label:"sr-only",children:t.placeholder}),(0,a.jsx)("input",{required:t.required,id:t.id,name:t.name,type:t.type,max:t.max,min:t.min,autoComplete:t.autoComplete,className:"".concat(r().textInput," ").concat(s," ").concat(null!==(e=t.classNames)&&void 0!==e?e:""," ").concat(t.hasError&&r().errorHighlight),placeholder:t.placeholder.replace("*",""),value:t.value,onInput:n,disabled:t.disabled,onBlur:t.onBlur,autoFocus:t.autoFocus,style:{colorScheme:"dark"}}),(0,a.jsx)("span",{className:r().errorMessage,children:t.hasError?t.errorMessage:""})]})}},4611:function(t,e,s){"use strict";var a,n;s.d(e,{F:function(){return a},m:function(){return r}}),(n=a||(a={})).OWNER="OWNER",n.VET="VET";class r{static getAll(){return Object.values(a)}static getEnum(t){return a[t]}static getTitle(t){let e;switch(t.toUpperCase()){case a.OWNER:e="Owner";break;case a.VET:e="Vet";break;default:e=""}return e}}},9229:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return N}});var a=s(85893),n=s(43067);s(67294);var r=s(18975),i=s(98741);s(79319);var l=s(81280),o=s(95546),u=s(83815),c=s.n(u);class h{get stringify(){return JSON.stringify(this.fields)}validate(){this.nameError=l.Z.isNotEmpty(this._name)?"":"Name is required",this.surnameError=l.Z.isNotEmpty(this._surname)?"":"Surname is required",this.emailError=l.Z.isEmailValid(this._email)?"":"Please provide a valid email",this._valid=l.Z.isEmpty(this.nameError)&&l.Z.isEmpty(this.surnameError)&&l.Z.isEmpty(this.emailError)}get isValid(){return this._valid}get email(){return this._email}set email(t){this._email=t,this.hasEmailError=!1}get city(){return this._city}set city(t){this._city=t}get state(){return this._state}set state(t){this._state=t}get country(){return this._country}set country(t){this._country=t}get zip(){return this._zip}set zip(t){this._zip=t}get address(){return this._address}set address(t){this._address=t}get phone(){return this._phone}set phone(t){this._phone=t}get surname(){return this._surname}set surname(t){this._surname=t,this.hasSurnameError=!1}get name(){return this._name}set name(t){this._name=t,this.hasNameError=!1}get fields(){return{email:this._email,name:this._name,surname:this._surname,phone:this._phone,address:this._address,city:this._city,state:this._state,country:this._country,zip:this._zip}}constructor(){this._email="",this._name="",this._surname="",this._phone="",this._address="",this._city="",this._state="",this._country="",this._zip="",this.nameError="",this.surnameError="",this.emailError="",this.hasNameError=!1,this.hasSurnameError=!1,this.hasEmailError=!1,this._valid=!1,this.checkEmail=()=>{let t=l.Z.isEmailValid(this._email);this.emailError=t?"":"Please provide a valid email",this.hasEmailError=!t},this.checkName=()=>{let t=l.Z.isEmpty(this._name);this.nameError=t?"Name is required":"",this.hasNameError=t},this.checkSurname=()=>{let t=l.Z.isEmpty(this._surname);this.surnameError=t?"Surname is required":"",this.hasSurnameError=t}}}var d=s(43432),m=s(11163),p=s(5152),v=s.n(p),y=s(84639),f=s(78017),g=s(4611),b=s(73439),x=s(53803),_=s(31730);let w=v()(()=>Promise.all([s.e(675),s.e(664),s.e(472)]).then(s.bind(s,62472)),{loadableGenerated:{webpack:()=>[62472]},ssr:!1});class E extends _.Z{render(){var t;return this.state.viewOnly&&l.Z.isNotEmpty(this.state.serverError)?(0,a.jsx)(y.Z,{message:this.state.serverError}):(0,a.jsxs)(w,{init:this.initPage,className:"bg-[url('/register-bg-dark.jpg')] bg-contain bg-center",children:[(0,a.jsx)("div",{className:"flex items-center mx-auto my-auto bg-slate-800 max-w-sm lg:max-w-xl border rounded-md border-indigo-600",children:(0,a.jsxs)("div",{className:"shadow-sm z-10 px-4 py-6",children:[(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)("h2",{className:"mb-6 text-center text-3xl font-bold tracking-tight text-indigo-100"})}),(0,a.jsxs)("div",{className:"flex flex-row items-baseline justify-end",children:[(0,a.jsx)("div",{className:"flex justify-center pb-4 grow",children:(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-indigo-100  text-center",children:this.state.viewOnly?"Account Information":"Update Account Information"})}),(0,a.jsx)(f.Z,{className:"static h-9 w-9 text-red-500 p-1.5 rounded-full hover:bg-red-300 hover:bg-opacity-20",onClick:()=>{var t;return null===(t=this.deleteDialogRef)||void 0===t?void 0:t.show()}})]}),(0,a.jsxs)("form",{className:"space-y-4",method:"POST",onSubmit:this.onSubmit,children:[(null===(t=this.state.user)||void 0===t?void 0:t.userType)&&(0,a.jsx)(o.Z,{id:"role",name:"role",type:"text",autoComplete:"off",width:"full",classNames:"rounded-md",placeholder:"Role",value:g.m.getTitle(this.state.user.userType),disabled:!0,showLabel:!0,onInput:b.ZT}),(0,a.jsxs)("div",{className:"w-full gap-2 inline-flex shadow-sm",children:[(0,a.jsx)(o.Z,{id:"name",name:"name",type:"text",autoComplete:"off",required:!0,width:"full",classNames:"rounded-md",placeholder:"Name",value:this.state.vm.name,onInput:this.onNameChange,onBlur:this.checkName,hasError:this.state.vm.hasNameError,errorMessage:this.state.vm.nameError,disabled:this.state.viewOnly,showLabel:!0}),(0,a.jsx)(o.Z,{id:"surname",name:"surname",type:"text",autoComplete:"off",required:!0,width:"full",classNames:"rounded-md",placeholder:"Surname",value:this.state.vm.surname,onInput:this.onSurnameChange,onBlur:this.checkSurname,hasError:this.state.vm.hasSurnameError,errorMessage:this.state.vm.surnameError,disabled:this.state.viewOnly,showLabel:!0})]}),(0,a.jsx)(o.Z,{id:"email-address",name:"email",type:"email",autoComplete:"off",required:!0,width:"full",classNames:"rounded-md shadow-sm",placeholder:"Email address",value:this.state.vm.email,onInput:this.onEmailChange,onBlur:this.checkMail,hasError:this.state.vm.hasEmailError,errorMessage:this.state.vm.emailError,disabled:this.state.viewOnly,showLabel:!0}),(0,a.jsxs)("div",{className:"w-full flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"country",className:"text-slate-300 text-sm mb-2",children:"country"}),(0,a.jsxs)("select",{value:this.state.vm.country,id:"country",name:"country",onChange:this.onCountryChange,className:"".concat(c().textInput," ").concat(c().textInputFull," rounded-md"),disabled:this.state.viewOnly,children:[(0,a.jsx)("option",{value:"",children:" No country Data"}),this.state.countriesKeys.map(t=>{let e=r.getName(t,"en");return(0,a.jsx)("option",{value:e,children:e},e)})]},this.state.vm.country)]}),(0,a.jsx)(o.Z,{id:"address",name:"address",type:"text",autoComplete:"off",width:"full",classNames:"rounded-md",placeholder:"Address",value:this.state.vm.address,onInput:this.onAddressChange,disabled:this.state.viewOnly,showLabel:!0}),(0,a.jsxs)("div",{className:"w-full align-center inline-flex rounded-md shadow-sm gap-2",children:[(0,a.jsx)(o.Z,{id:"city",name:"city",type:"text",autoComplete:"off",width:"full",classNames:"rounded-md",placeholder:"City",value:this.state.vm.city,onInput:this.onCityChange,disabled:this.state.viewOnly,showLabel:!0}),(0,a.jsx)(o.Z,{id:"zip",name:"zip",type:"text",autoComplete:"off",width:"full",placeholder:"Zip",value:this.state.vm.zip,onInput:this.onZipChange,disabled:this.state.viewOnly,classNames:"rounded-md",showLabel:!0}),(0,a.jsx)(o.Z,{id:"state",name:"state",type:"text",autoComplete:"off",width:"full",placeholder:"State",value:this.state.vm.state,onInput:this.onStateChange,disabled:this.state.viewOnly,classNames:"rounded-md",showLabel:!0})]}),(0,a.jsx)(i.Z,{width:"full",countryCodeEditable:!0,preferredCountries:["gr"],id:"phone",name:"phone",onChange:this.onPhoneChanged,value:this.state.vm.phone,disabled:this.state.viewOnly}),(0,a.jsx)(y.Z,{message:this.state.serverError}),(0,a.jsx)("div",{className:"w-full align-center inline-flex rounded-md shadow-sm gap-2",children:this.state.viewOnly?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{variant:"secondary",type:"button",title:"back",width:"full",onClick:()=>this.props.router.back()},"Cancel"),(0,a.jsx)(n.Z,{variant:"primary",type:"button",title:"Edit",width:"full",onClick:this.editAccount},"Edit")]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{variant:"secondary",type:"button",title:"Cancel",width:"full",onClick:this.cancel},"Cancel"),(0,a.jsx)(n.Z,{variant:"primary",type:"submit",title:"Update",width:"full",onClick:this.onSubmit},"submit")]})})]})]})}),(0,a.jsx)(x.Z,{ref:t=>this.deleteDialogRef=t,message:"Are you sure you want to delete your account?",onDelete:this.deletePressed,onCancel:()=>{var t;return null===(t=this.deleteDialogRef)||void 0===t?void 0:t.hide()}})]},"account")}constructor(t){super(t),this.deleteDialogRef=null,this.initVm=()=>{let t=this.state.user,e=this.state.vm;e.email=l.Z.valueOrEmpty(null==t?void 0:t.email,""),e.name=l.Z.valueOrEmpty(null==t?void 0:t.name,""),e.surname=l.Z.valueOrEmpty(null==t?void 0:t.surname,""),e.phone=l.Z.valueOrEmpty(null==t?void 0:t.phone,""),e.address=l.Z.valueOrEmpty(null==t?void 0:t.address,""),e.city=l.Z.valueOrEmpty(null==t?void 0:t.city,""),e.zip=l.Z.valueOrEmpty(null==t?void 0:t.zip,""),e.state=l.Z.valueOrEmpty(null==t?void 0:t.state,""),e.country=l.Z.valueOrEmpty(null==t?void 0:t.country,""),this.setState({vm:e})},this.getAccount=async t=>{let e=await (0,d.wB)(t),s=await e.json();if(e.ok)this.setState({user:s},()=>this.initVm());else if(401===e.status)this.logout(()=>this.props.router.replace("/auth/login"));else throw Error(s.error)},this.initPage=t=>{this.setState({token:t}),this.getAccount(t).catch(t=>{console.error("Could not get User",t),this.setState({serverError:t.message})}),r.registerLocale(s(41086));let e=r.getNames("en",{select:"official"});this.setState({countriesKeys:Object.keys(e)})},this.onNameChange=t=>{let e=this.state.vm;e.name=t,this.setState({vm:e})},this.onSurnameChange=t=>{let e=this.state.vm;e.surname=t,this.setState({vm:e})},this.onEmailChange=t=>{let e=this.state.vm;e.email=t,this.setState({vm:e})},this.onCountryChange=t=>{let e=this.state.vm;e.country=t.currentTarget.value,this.setState({vm:e})},this.onCityChange=t=>{let e=this.state.vm;e.city=t,this.setState({vm:e})},this.onStateChange=t=>{let e=this.state.vm;e.state=t,this.setState({vm:e})},this.onZipChange=t=>{let e=this.state.vm;e.zip=t,this.setState({vm:e})},this.onAddressChange=t=>{let e=this.state.vm;e.address=t,this.setState({vm:e})},this.onPhoneChanged=t=>{let e=this.state.vm;e.phone=t,this.setState({vm:e})},this.onSubmit=async()=>{let t=this.state.vm,e=this.state.token;if(t.validate(),!t.isValid)return;let s=await (0,d.iD)(t,e),a=await s.json();if(s.ok)this.setState({serverError:"",viewOnly:!0,user:a});else if(401===s.status)this.logout(()=>this.props.router.replace("/auth/login"));else{var n;console.error("update failed",a),this.setState({serverError:null!==(n=a.error)&&void 0!==n?n:""})}},this.checkName=()=>{this.state.vm.checkName()},this.checkSurname=()=>{this.state.vm.checkSurname()},this.checkMail=()=>{this.state.vm.checkEmail()},this.editAccount=()=>{this.getAccount(this.state.token).catch(t=>{console.error("Could not get User",t)}),this.setState({viewOnly:!1})},this.cancel=()=>{this.initVm(),this.setState({serverError:"",viewOnly:!0})},this.deletePressed=async()=>{var t;null===(t=this.deleteDialogRef)||void 0===t||t.hide();let e=await (0,d.l5)(this.state.token),s=await e.json();e.ok?this.logout(()=>this.props.router.replace("/auth/login")):this.setState({serverError:s.error})},this.state={vm:new h,viewOnly:!0,countriesKeys:[]}}}var N=(0,m.withRouter)(E)},43432:function(t,e,s){"use strict";function a(t){return fetch("".concat("https://petjournal-app-aeqg2.ondigitalocean.app/api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function n(t){return fetch("".concat("https://petjournal-app-aeqg2.ondigitalocean.app/api","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.fields)})}function r(t,e){return fetch("".concat("https://petjournal-app-aeqg2.ondigitalocean.app/api","/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t.fields)})}function i(t){return fetch("".concat("https://petjournal-app-aeqg2.ondigitalocean.app/api","/user"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}})}function l(t){return fetch("".concat("https://petjournal-app-aeqg2.ondigitalocean.app/api","/user"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})}function o(){return fetch("".concat("https://petjournal-app-aeqg2.ondigitalocean.app/api","/vets"),{method:"GET",headers:{"Content-Type":"application/json"}})}s.d(e,{HN:function(){return a},iD:function(){return r},l5:function(){return l},lx:function(){return n},ui:function(){return o},wB:function(){return i}})},83365:function(t){t.exports={btn:"button_btn__w__d1",btnFull:"button_btnFull__Q8iU8",btnPrimary:"button_btnPrimary__b_fGY",btnSecondary:"button_btnSecondary__Vaxi0",btnGroup:"button_btnGroup__zeRjm",btnPrimaryDisabled:"button_btnPrimaryDisabled__9IQhk",btnSecondaryDisabled:"button_btnSecondaryDisabled__eLBdY"}},16449:function(t){t.exports={modalContainer:"deleteModal_modalContainer__uCkMp",modal:"deleteModal_modal__xMA7r",content:"deleteModal_content__DXxjF",btnDelete:"deleteModal_btnDelete__EvPUt",btnCancel:"deleteModal_btnCancel__KYxQa",message:"deleteModal_message__QuWz0",iconButton:"deleteModal_iconButton__NyCIg",btnPrimaryDisabled:"deleteModal_btnPrimaryDisabled__LYe2S",btnSecondaryDisabled:"deleteModal_btnSecondaryDisabled__sQwls"}},83815:function(t){t.exports={textInput:"textInput_textInput__rwYXO",textInputText:"textInput_textInputText__RbFSM",label:"textInput_label__IpSov",textInputFull:"textInput_textInputFull__BtdFB",errorHighlight:"textInput_errorHighlight__6WM_d",errorMessage:"textInput_errorMessage__2Uw_U",textInputContainer:"textInput_textInputContainer__hcS5_",phoneInput:"textInput_phoneInput__ILwRV",phoneInputFull:"textInput_phoneInputFull__VL9NH"}},78017:function(t,e,s){"use strict";var a=s(67294);let n=a.forwardRef(function({title:t,titleId:e,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":e},s),t?a.createElement("title",{id:e},t):null,a.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"}))});e.Z=n},25652:function(t,e,s){"use strict";var a=s(67294);let n=a.forwardRef(function({title:t,titleId:e,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":e},s),t?a.createElement("title",{id:e},t):null,a.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))});e.Z=n}},function(t){t.O(0,[706,961,89,551,774,888,179],function(){return t(t.s=682)}),_N_E=t.O()}]);