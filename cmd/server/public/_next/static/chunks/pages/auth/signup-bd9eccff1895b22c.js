(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{12120:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return s(26969)}])},98741:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var r=s(85893);s(67294);var a=s(83815),i=s.n(a),n=s(67555),o=s.n(n);function h(e){var t;let s="full"===e.width?i().phoneInputFull:"";return(0,r.jsxs)("div",{className:"w-full shadow-sm",children:[(0,r.jsx)("label",{htmlFor:"phone",className:i().label,children:"Phone Number"}),(0,r.jsx)(o(),{autoFormat:e.autoFormat,countryCodeEditable:e.countryCodeEditable,preferredCountries:e.preferredCountries,inputProps:{id:e.id,name:e.name,className:"".concat(i().textInput," ").concat(i().phoneInput," ").concat(s," ").concat(null!==(t=e.classnames)&&void 0!==t?t:""),required:e.required,autoFocus:e.autoFocus,disabled:e.disabled},specialLabel:"",country:e.country,value:e.value,onChange:e.onChange})]})}},4611:function(e,t,s){"use strict";var r,a;s.d(t,{F:function(){return r},m:function(){return i}}),(a=r||(r={})).OWNER="OWNER",a.VET="VET";class i{static getAll(){return Object.values(r)}static getEnum(e){return r[e]}static getTitle(e){let t;switch(e.toUpperCase()){case r.OWNER:t="Owner";break;case r.VET:t="Vet";break;default:t=""}return t}}},26969:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(85893),a=s(43067);s(67294);var i=s(4611),n=s(18975),o=s(98741);s(79319);var h=s(81280),l=s(95546),u=s(83815),d=s.n(u),m=s(11163),c=s(27888),p=s(43432),g=s(84639);class y{get zip(){return this._zip}set zip(e){this._zip=e}get country(){return this._country}set country(e){this._country=e}get state(){return this._state}set state(e){this._state=e}get city(){return this._city}set city(e){this._city=e}get address(){return this._address}set address(e){this._address=e}get phone(){return this._phone}set phone(e){this._phone=e}get surname(){return this._surname}set surname(e){this._surname=e,this.hasSurnameError=!1}get name(){return this._name}set name(e){this._name=e,this.hasNameError=!1}get password(){return this._password}set password(e){this._password=e,this.hasPasswordError=!1}get email(){return this._email}set email(e){this._email=e,this.hasEmailError=!1}get userType(){return this._userType}set userType(e){this._userType=e}get stringify(){return JSON.stringify(this)}validate(){this.nameError=h.Z.isNotEmpty(this._name)?"":"Name is required",this.passwordError=h.Z.PasswordError(this._password),this.surnameError=h.Z.isNotEmpty(this._surname)?"":"Surname is required",this.emailError=h.Z.isEmailValid(this._email)?"":"Please provide a valid email",this._valid=h.Z.isEmpty(this.nameError)&&h.Z.isEmpty(this.surnameError)&&h.Z.isEmpty(this.emailError)&&h.Z.isEmpty(this.passwordError)}get isValid(){return this._valid}get fields(){return{userType:this._userType,email:this._email,password:this._password,name:this._name,surname:this._surname,phone:this._phone,address:this._address,city:this._city,state:this._state,country:this._country,zip:this._zip}}constructor(e){this._email="",this._password="",this._name="",this._surname="",this._phone="",this._address="",this._city="",this._state="",this._country="",this._zip="",this.nameError="",this.surnameError="",this.emailError="",this.passwordError="",this.hasNameError=!1,this.hasSurnameError=!1,this.hasEmailError=!1,this.hasPasswordError=!1,this._valid=!1,this.checkEmail=()=>{let e=h.Z.isEmailValid(this._email);this.emailError=e?"":"Please provide a valid email",this.hasEmailError=!e},this.checkPassword=()=>{this.passwordError=h.Z.PasswordError(this._password),this.hasPasswordError=h.Z.isNotEmpty(this.passwordError)},this.checkName=()=>{let e=h.Z.isEmpty(this._name);this.nameError=e?"Name is required":"",this.hasNameError=e},this.checkSurname=()=>{let e=h.Z.isEmpty(this._surname);this.surnameError=e?"Surname is required":"",this.hasSurnameError=e},this._userType=e}}var E=s(31730),w=s(96245);class v extends E.Z{componentDidMount(){n.registerLocale(s(41086));let e=n.getNames("en",{select:"official"});this.setState({countriesKeys:Object.keys(e)})}render(){let e=this.state.vm;return(0,r.jsxs)("main",{className:"flex flex-col h-screen ",children:[(0,r.jsx)(c.Z,{hideAllPages:!0,buttons:(0,r.jsx)(a.Z,{title:"Sign In",variant:"primary",onClick:this.navigateToSignIn})}),(0,r.jsx)("div",{className:"flex grow items-center justify-center bg-slate-900 bg-[url('/register-bg.jpg')] dark:bg-[url('/register-bg-dark.jpg')] bg-contain bg-center",children:(0,r.jsx)("div",{className:"my-4 flex items-center mx-auto bg-white dark:bg-slate-800 max-w-sm md:max-w-xl border rounded-md border-indigo-600",children:(0,r.jsxs)("div",{className:"shadow-sm z-10 px-4 py-4",children:[(0,r.jsx)("h2",{className:"py-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-indigo-100",children:"Create your account"}),(0,r.jsxs)("form",{className:"space-y-4",method:"POST",onSubmit:this.onSubmit,children:[(0,r.jsx)("div",{className:"w-full inline-flex shadow-sm",children:i.m.getAll().map(t=>{let s=e.userType===t;return(0,r.jsx)(a.Z,{variant:"group",selected:s,onClick:()=>this.onUserTypeChange(t),type:"button",title:i.m.getTitle(t),width:"full"},t)})}),(0,r.jsxs)("div",{className:"w-full inline-flex shadow-sm",children:[(0,r.jsx)(l.Z,{id:"name",name:"name",type:"text",autoComplete:"off",required:!0,width:"full",classNames:"rounded-s-md",placeholder:"Name",value:e.name,onInput:this.onNameChange,onBlur:this.checkName,hasError:e.hasNameError,errorMessage:e.nameError}),(0,r.jsx)(l.Z,{id:"surname",name:"surname",type:"text",autoComplete:"off",required:!0,width:"full",classNames:"rounded-e-md",placeholder:"Surname",value:e.surname,onInput:this.onSurnameChange,onBlur:this.checkSurname,hasError:e.hasSurnameError,errorMessage:e.surnameError})]}),(0,r.jsx)(l.Z,{id:"email-address",name:"email",type:"email",autoComplete:"off",required:!0,width:"full",classNames:"rounded-md shadow-sm",placeholder:"Email address",value:e.email,onInput:this.onEmailChange,onBlur:this.checkMail,hasError:e.hasEmailError,errorMessage:e.emailError}),(0,r.jsx)(l.Z,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,width:"full",classNames:"rounded-md shadow-sm",placeholder:"Password",value:e.password,onInput:this.onPasswordChange,onBlur:this.checkPassword,hasError:e.hasPasswordError,errorMessage:e.passwordError}),(0,r.jsxs)("div",{className:"w-full shadow-sm",children:[(0,r.jsxs)("select",{value:e.country,id:"country",name:"country",onChange:this.onCountryChange,className:"".concat(d().textInput," ").concat(d().textInputFull," rounded-t-md"),children:[(0,r.jsx)("option",{className:d().textInputText,value:"",children:"Choose a Country"}),this.state.countriesKeys.map(e=>{let t=n.getName(e,"en");return(0,r.jsx)("option",{className:d().textInputText,value:t,children:t},t)})]}),(0,r.jsx)(l.Z,{id:"address",name:"address",type:"text",autoComplete:"off",width:"full",placeholder:"Address",value:e.address,onInput:this.onAddressChange}),(0,r.jsxs)("div",{className:"w-full align-center inline-flex rounded-md shadow-sm ",children:[(0,r.jsx)(l.Z,{id:"city",name:"city",type:"text",autoComplete:"off",width:"full",classNames:"rounded-bl-md",placeholder:"City",value:e.city,onInput:this.onCityChange}),(0,r.jsx)(l.Z,{id:"zip",name:"zip",type:"text",autoComplete:"off",width:"full",placeholder:"Zip",value:e.zip,onInput:this.onZipChange}),(0,r.jsx)(l.Z,{id:"state",name:"state",type:"text",autoComplete:"off",width:"full",classNames:"rounded-br-md",placeholder:"State",value:e.state,onInput:this.onStateChange})]})]}),(0,r.jsx)("div",{className:"w-full shadow-sm",children:(0,r.jsx)(o.Z,{width:"full",autoFormat:!0,countryCodeEditable:!1,preferredCountries:["gr"],id:"phone",name:"phone",autoFocus:!0,country:h.Z.isEmpty(e.country)?"gr":e.country.toLowerCase(),onChange:this.onPhoneChanged,value:e.phone})}),(0,r.jsx)(g.Z,{message:this.state.serverError}),(0,r.jsx)(a.Z,{variant:"primary",type:"submit",title:"Register",width:"full",onClick:this.onSubmit},"submit")]})]})})})]})}constructor(e){super(e),this.onUserTypeChange=e=>{let t=this.state.vm;t.userType=i.m.getEnum(e),this.setState({vm:t})},this.onNameChange=e=>{let t=this.state.vm;t.name=e,this.setState({vm:t})},this.onSurnameChange=e=>{let t=this.state.vm;t.surname=e,this.setState({vm:t})},this.onEmailChange=e=>{let t=this.state.vm;t.email=e,this.setState({vm:t})},this.onPasswordChange=e=>{let t=this.state.vm;t.password=e,this.setState({vm:t})},this.onCountryChange=e=>{let t=this.state.vm;t.country=e.currentTarget.value,this.setState({vm:t})},this.onCityChange=e=>{let t=this.state.vm;t.city=e,this.setState({vm:t})},this.onStateChange=e=>{let t=this.state.vm;t.state=e,this.setState({vm:t})},this.onZipChange=e=>{let t=this.state.vm;t.zip=e,this.setState({vm:t})},this.onAddressChange=e=>{let t=this.state.vm;t.address=e,this.setState({vm:t})},this.onPhoneChanged=e=>{let t=this.state.vm;t.phone=e,this.setState({vm:t})},this.checkName=()=>{this.state.vm.checkName(),this.forceUpdate()},this.checkSurname=()=>{this.state.vm.checkSurname(),this.forceUpdate()},this.checkMail=()=>{this.state.vm.checkEmail(),this.forceUpdate()},this.checkPassword=()=>{this.state.vm.checkPassword(),this.forceUpdate()},this.navigateToSignIn=()=>{this.props.router.replace("/auth/login")},this.onLoginSuccess=e=>{let t=(0,w.Z)(e);this.cookies.set("token",e,{expires:(null==t?void 0:t.exp)>Date.now()?new Date(null==t?void 0:t.exp):void 0}),this.props.router.replace("/")},this.onFail=e=>{console.error("Login failed",e),this.setState({serverError:e}),this.logout()},this.onSubmit=async()=>{if(this.state.vm.validate(),!this.state.vm.isValid)return;let e=await (0,p.lx)(this.state.vm),t=await e.json();e.ok?this.onLoginSuccess(t.token):this.onFail(t.error)},this.state={vm:new y(i.F.OWNER),countriesKeys:[]}}}var f=(0,m.withRouter)(v)}},function(e){e.O(0,[675,664,961,89,318,774,888,179],function(){return e(e.s=12120)}),_N_E=e.O()}]);